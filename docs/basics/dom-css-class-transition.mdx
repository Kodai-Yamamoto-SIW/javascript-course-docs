---
title: クラス切り替えでCSSアニメーション
sidebar_position: 999
---

import Exercise, { Solution } from "@kodai-yamamoto-siw/exercise/client";
import { CodePreview } from "@kodai-yamamoto-siw/code-preview";

## 今日の学習はこんなところで使うよ

この章では、**要素に付けるクラス名をJavaScriptで切り替えて見た目を変える方法**と、
そこに **CSS Transition** を足してアニメーションさせる方法を学びます。
メニューの開閉、モーダルウィンドウの表示・非表示、カードの選択状態のON/OFFなど、「状態」を表すクラスを付け替えることで、見た目の変化とアニメーションをコントロールできます。

まずは **transitionなしで単に見た目が切り替わるだけの例** を見て、
「クラスをつけ外しすると、適用されるCSSが変わる」ということを確認します。
そのあとで「同じコードにtransitionを足すと滑らかにアニメーションする」という流れで学習します。

---

## まずは「クラス切り替えだけ」で見た目を変える

### 基本の考え方（クラス切り替え）

1. **CSS側**で「通常の状態」と「変化後の状態」のスタイルを、クラスで分けて書く。
2. **JavaScript側**で、イベントに応じてクラスを追加・削除する。
3. 特によく使うのが `classList.toggle` で、付いていなければクラスを追加、付いていればクラスを削除できる。
4. クラスが変わる → 適用されるCSSが変わる → 見た目がパッと切り替わる。

```js
要素.classList.toggle("クラス名"); // クラスが付いていなければ追加、付いていれば削除
```

### シンプルな例: ボックスをクリックしたら瞬時に大きくなる

<CodePreview
  initialHTML={`<div class="box">クリックでサイズ変更</div>`}
  initialCSS={`.box {
    width: 120px;
    height: 120px;
    background-color: skyblue;
  }
  .box.big {
    width: 200px;
    height: 200px;
    background-color: deepskyblue;
  }`}
  initialJS={`// boxクラスの要素を取得
  let boxYoso = document.querySelector(".box");

  // クリックされたときの処理を登録
  boxYoso.addEventListener("click", function() {
    // bigクラスを付けたり外したりして切り替え
    boxYoso.classList.toggle("big");
  });`}
/>

#### なぜクリックでサイズが変わるのか

1. HTMLでは `div` に最初 `class="box"` だけが付いているため、CSSの `.box { ... }` の幅と高さ (120px) が適用される。
2. JavaScriptで `boxYoso.addEventListener("click", ...)` を書くことで、クリックされた瞬間に中の処理が実行される。
3. 処理の中で `boxYoso.classList.toggle("big")` を呼び出すと、最初は `big` クラスが付いていないので `big` クラスが追加される。
4. 要素のクラスが `class="box big"` （box と big の2つのクラスがついているという意味（※クラスは半角スペース区切りで複数つけることができる））になると、CSSの `.box.big { ... }` で指定した幅200px・高さ200px・背景色deepskyblue が新しく適用される。

つまり「イベントでクラスを付ける → そのクラス用のCSSが適用される」という流れでサイズが変化している。

---

<Exercise title="演習1（transitionなしでクラス切り替え）">

次のプレビューのように動作するよう、HTML/CSS/JavaScriptを書け（幅や色は自由で良い）。

**動作**: 要素をクリックすると `active` クラスが付いたり外れたりすることで見た目が切り替わる（transition は使わない）。

<CodePreview
  sourceId="演習1"
  htmlVisible={false}
  cssVisible={false}
  jsVisible={false}
  previewVisible={true}
  initialHTML={`<div class="box">クリックしてね</div>`}
  initialCSS={`.box {
    width: 150px;
    height: 150px;
    background-color: lightgray;
  }
  .box.active {
    width: 220px;
    height: 220px;
    background-color: lightgreen;
  }`}
  initialJS={`// boxクラスの要素を取得
  let boxYoso = document.querySelector(".box");

  // クリックされたときの処理を登録
  boxYoso.addEventListener("click", function() {
    // activeクラスを付けたり外したりして切り替え
    boxYoso.classList.toggle("active");
  });`}
/><Solution>
<CodePreview sourceId="演習1" />
</Solution>
</Exercise>

---

## 同じコードにtransitionを足してアニメーションさせる

次に、さきほどと同じ「クラスを切り替えるコード」に、CSSの `transition` を足してみます。

1. CSS側で、アニメーションさせたい要素に `transition` を追加する。
2. クラスが切り替わると、プロパティの変化がパッとではなく、指定した時間をかけて滑らかに変化する。

### 例: 先ほどのボックスにtransitionを追加する

<CodePreview
  initialHTML={`<div class="box">クリックでサイズ変更</div>`}
  initialCSS={`.box {
    width: 120px;
    height: 120px;
    background-color: skyblue;
    transition: all 0.3s;
  }
  .box.big {
    width: 200px;
    height: 200px;
    background-color: deepskyblue;
  }`}
  initialJS={`// boxクラスの要素を取得
  let boxYoso = document.querySelector(".box");

  // クリックされたときの処理を登録
  boxYoso.addEventListener("click", function() {
    // bigクラスを付けたり外したりして切り替え
    boxYoso.classList.toggle("big");
  });`}
/>

:::tip transition を書く場所が大事
`transition` は両方の状態で常に残る共通クラス（例: `.box`）に書く。そこで指定すると付ける時も外す時も滑らかになる。変化側だけ（例: `.box.big`）に置くと戻りが一瞬になる。複数なら `transition: all 0.3s;`、特定なら `transition: width 0.3s, height 0.3s;`。
:::

---

<Exercise title="演習2（滑らかになるようにアニメーション化）">

演習1と同じように動作するが、次のプレビューのように、さらにサイズや色の変化が滑らかに見えるようにしたHTML/CSS/JavaScriptを作成せよ（幅や色は自由で良い）。

**動作**: 要素をクリックすると `active` クラスが付いたり外れたりすることで見た目が切り替わり、その変化が滑らかにアニメーションする。

<CodePreview
  sourceId="演習2"
  htmlVisible={false}
  cssVisible={false}
  jsVisible={false}
  previewVisible={true}
  initialHTML={`<div class="box">クリックしてね</div>`}
  initialCSS={`.box {
    width: 150px;
    height: 150px;
    background-color: lightgray;
    transition: all 0.4s;
  }
  .box.active {
    width: 220px;
    height: 220px;
    background-color: lightgreen;
  }`}
  initialJS={`// boxクラスの要素を取得
  let boxYoso = document.querySelector(".box");

  // クリックされたときの処理を登録
  boxYoso.addEventListener("click", function() {
    // activeクラスを付けたり外したりして切り替え
    boxYoso.classList.toggle("active");
  });`}
/><Solution>
<CodePreview sourceId="演習2" />
</Solution>
</Exercise>

---

## classListでクラスを操作する

クラスの追加・削除には、要素の `classList` を使います。

```js
要素.classList.add("クラス名");      // クラスを追加
要素.classList.remove("クラス名");   // クラスを削除
要素.classList.toggle("クラス名");   // 付いていれば削除、なければ追加
```

### 例: ホバーでクラスを付け外しする

<CodePreview
  initialHTML={`<div class="card">マウスを乗せてね</div>`}
  initialCSS={`.card {
    width: 180px;
    padding: 20px;
    background-color: white;
    border: 1px solid #ccc;
    transition: all 0.3s;
  }
  .card.hovered {
    background-color: #ffe0b2;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
  }`}
  initialJS={`// cardクラスの要素を取得
  let cardYoso = document.querySelector(".card");

  // マウスが乗ったときの処理を登録
  cardYoso.addEventListener("mouseenter", function() {
    // hoveredクラスを追加
    cardYoso.classList.add("hovered");
  });

  // マウスが離れたときの処理を登録
  cardYoso.addEventListener("mouseleave", function() {
    // hoveredクラスを削除
    cardYoso.classList.remove("hovered");
  });`}
/>

---

<Exercise title="演習3（hoverで影をつける）">

次のように動作するよう、CSSとJavaScriptを書け（幅や色は自由で良い）。

**動作**: カードにマウスを乗せると背景色が変わり影が付く。マウスが離れると元に戻る。変化は滑らかにアニメーションする。また、p要素のテキストも状態に応じて切り替わる。

<CodePreview
  sourceId="演習3"
  htmlVisible={true}
  cssVisible={false}
  jsVisible={false}
  previewVisible={true}
  initialHTML={`<div class="card">マウスを乗せてね</div>
  <p>ステータス: <span class="status">通常</span></p>`}
  initialCSS={`.card {
    width: 200px;
    height: 100px;
    background-color: white;
    border: 1px solid #ccc;
    transition: all 0.3s;
  }
  .card.hovered {
    background-color: #fff3cd;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
  }`}
  initialJS={`// cardクラスの要素とstatus要素を取得
  let cardYoso = document.querySelector(".card");
  let statusYoso = document.querySelector(".status");

  // マウスが乗ったときの処理を登録
  cardYoso.addEventListener("mouseenter", function() {
    // hoveredクラスを追加
    cardYoso.classList.add("hovered");

    // ステータステキストを変更
    statusYoso.innerText = "ホバー中";
  });

  // マウスが離れたときの処理を登録
  cardYoso.addEventListener("mouseleave", function() {
    // hoveredクラスを削除
    cardYoso.classList.remove("hovered");

    // ステータステキストを元に戻す
    statusYoso.innerText = "通常";
  });`}
/><Solution>
<CodePreview sourceId="演習3" />
</Solution>
</Exercise>

---

## classList.contains で「今そのクラスが付いているか」を調べる

クラスの ON/OFF を切り替えるだけなら `classList.toggle` だけで十分ですが、
「今そのクラスが付いているかどうかで処理を分けたい」こともよくあります。

そのときに使うのが `classList.contains` です。

```js
要素.classList.contains("クラス名"); // 付いていれば true、付いていなければ false
```

この戻り値（true / false）を使って、`if` 文でメッセージや見た目を切り替えることができます。

### 例: 選択中なら「ON」、そうでなければ「OFF」と表示する

<CodePreview
  initialHTML={`<button class="btn">ボタン</button>
  <p>状態: <span class="status">OFF</span></p>`}
  initialCSS={`.btn {
    padding: 8px 16px;
  }
  .btn.selected {
    background-color: lightcoral;
  }`}
  initialJS={`// ボタンとステータスの要素を取得
  let btnYoso = document.querySelector(".btn");
  let statusYoso = document.querySelector(".status");

  // ボタンがクリックされたときの処理を登録
  btnYoso.addEventListener("click", function() {
    // selectedクラスを付けたり外したりして切り替え
    btnYoso.classList.toggle("selected");

    // selectedクラスが付いているかどうかで表示を切り替え
    if (btnYoso.classList.contains("selected")) {
      statusYoso.innerText = "ON";
    } else {
      statusYoso.innerText = "OFF";
    }
  });`}
/>

---

<Exercise title="演習4（ON/OFF表示をclassList.containsで切り替える）">

次のプレビューのように動作するよう、HTML/CSS/JavaScriptを書け（幅や色は自由で良い）。

**動作**: ボタンをクリックするたびに、見た目と「有効/無効」の表示が切り替わる。`classList.contains` を使って、ボタンが選択されているかどうかでテキストを変えること。

<CodePreview
  sourceId="演習4"
  htmlVisible={false}
  cssVisible={false}
  jsVisible={false}
  previewVisible={true}
  initialHTML={`<button class="btn">通知を切り替え</button>
  <p>通知の状態: <span class="status">無効</span></p>`}
  initialCSS={`.btn {
    padding: 8px 16px;
  }
  .btn.selected {
    background-color: lightgreen;
  }`}
  initialJS={`// ボタンとステータスの要素を取得
  let btnYoso = document.querySelector(".btn");
  let statusYoso = document.querySelector(".status");

  // ボタンがクリックされたときの処理を登録
  btnYoso.addEventListener("click", function() {
    // selectedクラスを付けたり外したりして切り替え
    btnYoso.classList.toggle("selected");

    // selectedクラスが付いているかどうかで表示を切り替え
    if (btnYoso.classList.contains("selected")) {
      statusYoso.innerText = "有効";
    } else {
      statusYoso.innerText = "無効";
    }
  });`}
/><Solution>
<CodePreview sourceId="演習4" />
</Solution>
</Exercise>

---

## 演習-発展（実践的な例）

ここからは、実際のウェブサイトでよく見かける機能を作成する演習です。
好きなものを選んで挑戦してみましょう。

---

<Exercise title="演習-発展1（タブの切り替え）">

次のプレビューのように動作する、タブ切り替えUIを作成せよ。

**動作要件**:
- 3つのタブボタンがあり、それぞれクリックすると対応するコンテンツが表示される
- 選択されているタブには `active` クラスが付き、見た目が変わる
- コンテンツの切り替えは、`active` クラスの有無で表示・非表示を制御する
- 最初は1つ目のタブとコンテンツが選択されている状態

<CodePreview
  sourceId="演習-発展1"
  htmlVisible={false}
  cssVisible={false}
  jsVisible={false}
  previewVisible={true}
  initialHTML={`<div class="tabs">
    <button class="tab active" data-tab="1">ホーム</button>
    <button class="tab" data-tab="2">プロフィール</button>
    <button class="tab" data-tab="3">設定</button>
  </div>
  <div class="tab-contents">
    <div class="tab-content active" data-content="1">ホームの内容です</div>
    <div class="tab-content" data-content="2">プロフィールの内容です</div>
    <div class="tab-content" data-content="3">設定の内容です</div>
  </div>`}
  initialCSS={`.tabs {
    display: flex;
    gap: 8px;
    margin-bottom: 16px;
  }
  .tab {
    padding: 10px 20px;
    background-color: #f0f0f0;
    border: none;
    cursor: pointer;
    transition: all 0.3s;
  }
  .tab.active {
    background-color: #007bff;
    color: white;
  }
  .tab-content {
    display: none;
    padding: 20px;
    background-color: #f9f9f9;
    border: 1px solid #ddd;
  }
  .tab-content.active {
    display: block;
  }`}
  initialJS={`// すべてのタブボタンを取得
  let tabYosos = document.querySelectorAll(".tab");

  // すべてのタブをループで処理
  for (let i = 0; i < tabYosos.length; i++) {
    // 各タブにクリックイベントを登録
    tabYosos[i].addEventListener("click", function() {
      // クリックされたタブの番号を取得
      let tabNumber = tabYosos[i].getAttribute("data-tab");

      // すべてのタブからactiveクラスを削除
      for (let j = 0; j < tabYosos.length; j++) {
        tabYosos[j].classList.remove("active");
      }

      // クリックされたタブにactiveクラスを追加
      tabYosos[i].classList.add("active");

      // すべてのコンテンツからactiveクラスを削除
      let contentYosos = document.querySelectorAll(".tab-content");
      for (let k = 0; k < contentYosos.length; k++) {
        contentYosos[k].classList.remove("active");
      }

      // 対応するコンテンツにactiveクラスを追加
      let targetContent = document.querySelector('.tab-content[data-content="' + tabNumber + '"]');
      targetContent.classList.add("active");
    });
  }`}
/><Solution>
<CodePreview sourceId="演習-発展1" />

**解説**:
- `data-tab` と `data-content` 属性を使って、タブとコンテンツを紐付けています
- タブがクリックされたら、まずすべてのタブとコンテンツから `active` を削除し、クリックされたタブと対応するコンテンツにのみ `active` を追加することで切り替えを実現しています
- ループを使ってすべての要素を処理することで、タブの数が増えても対応できます
</Solution>
</Exercise>

---

<Exercise title="演習-発展2（アコーディオン）">

次のプレビューのように動作する、アコーディオンUIを作成せよ。

**動作要件**:
- 質問をクリックすると、対応する回答が表示される
- もう一度クリックすると回答が非表示になる
- 回答の表示・非表示は滑らかにアニメーションする
- 複数の質問を同時に開くことができる

<CodePreview
  sourceId="演習-発展2"
  htmlVisible={false}
  cssVisible={false}
  jsVisible={false}
  previewVisible={true}
  initialHTML={`<div class="faq-item">
    <div class="question">JavaScriptとは何ですか？</div>
    <div class="answer">JavaScriptはWebページに動きをつけるプログラミング言語です。</div>
  </div>
  <div class="faq-item">
    <div class="question">CSSとは何ですか？</div>
    <div class="answer">CSSはWebページの見た目を整えるための言語です。</div>
  </div>
  <div class="faq-item">
    <div class="question">HTMLとは何ですか？</div>
    <div class="answer">HTMLはWebページの構造を作るための言語です。</div>
  </div>`}
  initialCSS={`.faq-item {
    margin-bottom: 12px;
    border: 1px solid #ddd;
  }
  .question {
    padding: 16px;
    background-color: #f5f5f5;
    cursor: pointer;
    user-select: none;
  }
  .question:hover {
    background-color: #e8e8e8;
  }
  .answer {
    max-height: 0;
    overflow: hidden;
    padding: 0 16px;
    background-color: white;
    transition: all 0.3s;
  }
  .answer.open {
    max-height: 200px;
    padding: 16px;
  }`}
  initialJS={`// すべての質問要素を取得
  let questionYosos = document.querySelectorAll(".question");

  // すべての質問をループで処理
  for (let i = 0; i < questionYosos.length; i++) {
    // 各質問にクリックイベントを登録
    questionYosos[i].addEventListener("click", function() {
      // クリックされた質問の次の要素（回答）を取得
      let answerYoso = questionYosos[i].nextElementSibling;

      // 回答のopenクラスを付けたり外したりして切り替え
      answerYoso.classList.toggle("open");
    });
  }`}
/><Solution>
<CodePreview sourceId="演習-発展2" />

**解説**:
- `max-height` と `padding` を使って、回答の表示・非表示を制御しています
- `transition: all 0.3s;` で滑らかなアニメーションを実現
- `nextElementSibling` を使って、クリックされた質問の直後にある回答要素を取得しています
</Solution>
</Exercise>

---

<Exercise title="演習-発展3（カード選択）">

次のプレビューのように動作する、複数選択可能なカードUIを作成せよ。

**動作要件**:
- 3つのカードがあり、クリックすると選択状態になる
- 選択されたカードには `selected` クラスが付き、見た目が変わる
- もう一度クリックすると選択が解除される
- 複数のカードを同時に選択できる
- 選択中のカード数を表示する

<CodePreview
  sourceId="演習-発展3"
  htmlVisible={false}
  cssVisible={false}
  jsVisible={false}
  previewVisible={true}
  initialHTML={`<div class="cards">
    <div class="card">カード1</div>
    <div class="card">カード2</div>
    <div class="card">カード3</div>
  </div>
  <p>選択中: <span class="count">0</span>枚</p>`}
  initialCSS={`.cards {
    display: flex;
    gap: 12px;
    margin-bottom: 16px;
  }
  .card {
    width: 120px;
    height: 100px;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: white;
    border: 2px solid #ccc;
    cursor: pointer;
    transition: all 0.3s;
  }
  .card:hover {
    border-color: #999;
  }
  .card.selected {
    background-color: #e3f2fd;
    border-color: #2196f3;
    transform: scale(1.05);
  }`}
  initialJS={`// すべてのカード要素を取得
  let cardYosos = document.querySelectorAll(".card");

  // カウント表示要素を取得
  let countYoso = document.querySelector(".count");

  // すべてのカードをループで処理
  for (let i = 0; i < cardYosos.length; i++) {
    // 各カードにクリックイベントを登録
    cardYosos[i].addEventListener("click", function() {
      // selectedクラスを付けたり外したりして切り替え
      cardYosos[i].classList.toggle("selected");

      // 選択中のカード数をカウント
      let selectedCount = 0;
      for (let j = 0; j < cardYosos.length; j++) {
        if (cardYosos[j].classList.contains("selected")) {
          selectedCount = selectedCount + 1;
        }
      }

      // カウントを表示
      countYoso.innerText = selectedCount;
    });
  }`}
/><Solution>
<CodePreview sourceId="演習-発展3" />

**解説**:
- カードをクリックするたびに `selected` クラスを toggle で切り替えています
- その後、すべてのカードをループで確認し、`classList.contains("selected")` で選択中のカードをカウントしています
- `transform: scale(1.05);` で選択時に少し大きくなるアニメーションを追加しています
</Solution>
</Exercise>

---

<Exercise title="演習-発展4（お気に入りボタン）">

次のプレビューのように動作する、お気に入りボタンを作成せよ。

**動作要件**:
- ハートボタンをクリックすると、お気に入り状態のON/OFFが切り替わる
- お気に入り状態では色が変わり、少し大きくなる
- 変化は滑らかにアニメーションする
- 状態に応じてテキストも「お気に入りに追加」「お気に入り済み」と切り替わる

<CodePreview
  sourceId="演習-発展4"
  htmlVisible={false}
  cssVisible={false}
  jsVisible={false}
  previewVisible={true}
  initialHTML={`<div class="favorite-btn">♥</div>
  <p class="status-text">お気に入りに追加</p>`}
  initialCSS={`.favorite-btn {
    width: 60px;
    height: 60px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 32px;
    color: #ccc;
    border: 2px solid #ccc;
    border-radius: 50%;
    cursor: pointer;
    transition: all 0.3s;
    user-select: none;
  }
  .favorite-btn:hover {
    transform: scale(1.1);
  }
  .favorite-btn.active {
    color: #e91e63;
    border-color: #e91e63;
    transform: scale(1.15);
  }
  .status-text {
    margin-top: 12px;
    color: #666;
  }`}
  initialJS={`// ボタンとテキスト要素を取得
  let btnYoso = document.querySelector(".favorite-btn");
  let textYoso = document.querySelector(".status-text");

  // ボタンがクリックされたときの処理を登録
  btnYoso.addEventListener("click", function() {
    // activeクラスを付けたり外したりして切り替え
    btnYoso.classList.toggle("active");

    // activeクラスが付いているかどうかで表示を切り替え
    if (btnYoso.classList.contains("active")) {
      textYoso.innerText = "お気に入り済み";
    } else {
      textYoso.innerText = "お気に入りに追加";
    }
  });`}
/><Solution>
<CodePreview sourceId="演習-発展4" />

**解説**:
- ハートマーク（♥）をボタンとして使用しています
- `border-radius: 50%;` で円形のボタンを作成
- ホバー時と選択時で異なる `transform: scale()` を指定することで、動きに変化をつけています
- `classList.contains` を使って状態を確認し、テキストを切り替えています
</Solution>
</Exercise>

---

<Exercise title="演習-発展5（通知バナー）">

次のプレビューのように動作する、通知バナーを作成せよ。

**動作要件**:
- 「通知を表示」ボタンをクリックすると、画面上部に通知バナーが表示される
- 通知バナーの×ボタンをクリックすると、バナーが非表示になる
- バナーの表示・非表示は滑らかにアニメーションする
- バナーが表示されている間は、「通知を表示」ボタンは無効化される

<CodePreview
  sourceId="演習-発展5"
  htmlVisible={false}
  cssVisible={false}
  jsVisible={false}
  previewVisible={true}
  initialHTML={`<div class="notification">
    <span>新しいメッセージが届きました</span>
    <button class="close-btn">×</button>
  </div>
  <button class="show-btn">通知を表示</button>`}
  initialCSS={`.notification {
    position: fixed;
    top: -100px;
    left: 50%;
    transform: translateX(-50%);
    background-color: #4caf50;
    color: white;
    padding: 16px 24px;
    border-radius: 4px;
    display: flex;
    align-items: center;
    gap: 20px;
    transition: all 0.4s;
  }
  .notification.show {
    top: 20px;
  }
  .close-btn {
    background: none;
    border: none;
    color: white;
    font-size: 24px;
    cursor: pointer;
    padding: 0;
    width: 24px;
    height: 24px;
  }
  .show-btn {
    padding: 10px 20px;
    background-color: #2196f3;
    color: white;
    border: none;
    cursor: pointer;
  }
  .show-btn.disabled {
    background-color: #ccc;
    cursor: not-allowed;
  }`}
  initialJS={`// 各要素を取得
  let notificationYoso = document.querySelector(".notification");
  let closeBtnYoso = document.querySelector(".close-btn");
  let showBtnYoso = document.querySelector(".show-btn");

  // 「通知を表示」ボタンがクリックされたときの処理
  showBtnYoso.addEventListener("click", function() {
    // 通知にshowクラスを追加
    notificationYoso.classList.add("show");

    // ボタンを無効化
    showBtnYoso.classList.add("disabled");
  });

  // 「×」ボタンがクリックされたときの処理
  closeBtnYoso.addEventListener("click", function() {
    // 通知からshowクラスを削除
    notificationYoso.classList.remove("show");

    // ボタンを有効化
    showBtnYoso.classList.remove("disabled");
  });`}
/><Solution>
<CodePreview sourceId="演習-発展5" />

**解説**:
- `position: fixed;` で画面に固定し、`top: -100px;` で最初は画面外に配置
- `show` クラスが付くと `top: 20px;` になり、画面内に滑らかに降りてきます
- ボタンに `disabled` クラスを付けることで見た目を変え、視覚的に無効状態を表現しています
</Solution>
</Exercise>

---

<Exercise title="演習-発展6（画像ギャラリー切り替え）">

次のプレビューのように動作する、画像ギャラリーを作成せよ。

**動作要件**:
- 3つのサムネイル画像があり、クリックすると大きく表示される画像が切り替わる
- 選択中のサムネイルには枠が付く
- 画像の切り替えは滑らかにアニメーションする（透明度で切り替え）

<CodePreview
  sourceId="演習-発展6"
  htmlVisible={false}
  cssVisible={false}
  jsVisible={false}
  previewVisible={true}
  initialHTML={`<div class="main-image-container">
    <div class="main-image active" data-img="1">画像1（メイン）</div>
    <div class="main-image" data-img="2">画像2（メイン）</div>
    <div class="main-image" data-img="3">画像3（メイン）</div>
  </div>
  <div class="thumbnails">
    <div class="thumbnail active" data-thumb="1">画像1</div>
    <div class="thumbnail" data-thumb="2">画像2</div>
    <div class="thumbnail" data-thumb="3">画像3</div>
  </div>`}
  initialCSS={`.main-image-container {
    position: relative;
    width: 300px;
    height: 200px;
    background-color: #f0f0f0;
    margin-bottom: 16px;
    overflow: hidden;
  }
  .main-image {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    transition: opacity 0.5s;
  }
  .main-image.active {
    opacity: 1;
  }
  .main-image[data-img="1"] {
    background-color: #ffcdd2;
  }
  .main-image[data-img="2"] {
    background-color: #c8e6c9;
  }
  .main-image[data-img="3"] {
    background-color: #bbdefb;
  }
  .thumbnails {
    display: flex;
    gap: 8px;
  }
  .thumbnail {
    width: 90px;
    height: 60px;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: #e0e0e0;
    border: 3px solid transparent;
    cursor: pointer;
    font-size: 12px;
    transition: all 0.3s;
  }
  .thumbnail:hover {
    border-color: #999;
  }
  .thumbnail.active {
    border-color: #2196f3;
  }
  .thumbnail[data-thumb="1"] {
    background-color: #ffcdd2;
  }
  .thumbnail[data-thumb="2"] {
    background-color: #c8e6c9;
  }
  .thumbnail[data-thumb="3"] {
    background-color: #bbdefb;
  }`}
  initialJS={`// すべてのサムネイルを取得
  let thumbnailYosos = document.querySelectorAll(".thumbnail");

  // すべてのサムネイルをループで処理
  for (let i = 0; i < thumbnailYosos.length; i++) {
    // 各サムネイルにクリックイベントを登録
    thumbnailYosos[i].addEventListener("click", function() {
      // クリックされたサムネイルの番号を取得
      let imgNumber = thumbnailYosos[i].getAttribute("data-thumb");

      // すべてのサムネイルからactiveクラスを削除
      for (let j = 0; j < thumbnailYosos.length; j++) {
        thumbnailYosos[j].classList.remove("active");
      }

      // クリックされたサムネイルにactiveクラスを追加
      thumbnailYosos[i].classList.add("active");

      // すべてのメイン画像からactiveクラスを削除
      let mainImageYosos = document.querySelectorAll(".main-image");
      for (let k = 0; k < mainImageYosos.length; k++) {
        mainImageYosos[k].classList.remove("active");
      }

      // 対応するメイン画像にactiveクラスを追加
      let targetImage = document.querySelector('.main-image[data-img="' + imgNumber + '"]');
      targetImage.classList.add("active");
    });
  }`}
/><Solution>
<CodePreview sourceId="演習-発展6" />

**解説**:
- `position: absolute;` と `opacity` を使って、複数の画像を重ねて配置し、透明度で切り替えています
- `data-thumb` と `data-img` 属性を使って、サムネイルとメイン画像を紐付けています
- タブ切り替えと似た仕組みですが、画像の切り替えに特化した実装になっています
</Solution>
</Exercise>

---

<Exercise title="演習-発展7（プライスカード選択）">

次のプレビューのように動作する、料金プランの選択UIを作成せよ。

**動作要件**:
- 3つの料金プランカードがあり、1つだけ選択できる
- カードをクリックすると、そのカードだけが選択状態になる（他は自動的に解除）
- 選択されたカードには `selected` クラスが付き、見た目が変わる
- 選択されたプラン名を下部に表示する

<CodePreview
  sourceId="演習-発展7"
  htmlVisible={false}
  cssVisible={false}
  jsVisible={false}
  previewVisible={true}
  initialHTML={`<div class="price-cards">
    <div class="price-card" data-plan="ベーシック">
      <h3>ベーシック</h3>
      <p class="price">¥1,000/月</p>
    </div>
    <div class="price-card" data-plan="スタンダード">
      <h3>スタンダード</h3>
      <p class="price">¥2,000/月</p>
    </div>
    <div class="price-card" data-plan="プレミアム">
      <h3>プレミアム</h3>
      <p class="price">¥3,000/月</p>
    </div>
  </div>
  <p>選択中のプラン: <span class="selected-plan">未選択</span></p>`}
  initialCSS={`.price-cards {
    display: flex;
    gap: 16px;
    margin-bottom: 20px;
  }
  .price-card {
    flex: 1;
    padding: 24px;
    background-color: white;
    border: 2px solid #ddd;
    border-radius: 8px;
    text-align: center;
    cursor: pointer;
    transition: all 0.3s;
  }
  .price-card:hover {
    border-color: #999;
    transform: translateY(-4px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  }
  .price-card.selected {
    border-color: #4caf50;
    background-color: #f1f8f4;
    transform: translateY(-4px);
    box-shadow: 0 4px 12px rgba(76, 175, 80, 0.3);
  }
  .price-card h3 {
    margin: 0 0 12px 0;
    font-size: 18px;
  }
  .price {
    margin: 0;
    font-size: 24px;
    font-weight: bold;
    color: #4caf50;
  }
  .selected-plan {
    font-weight: bold;
    color: #4caf50;
  }`}
  initialJS={`// すべての料金カードを取得
  let cardYosos = document.querySelectorAll(".price-card");

  // 選択中のプラン表示要素を取得
  let planYoso = document.querySelector(".selected-plan");

  // すべてのカードをループで処理
  for (let i = 0; i < cardYosos.length; i++) {
    // 各カードにクリックイベントを登録
    cardYosos[i].addEventListener("click", function() {
      // クリックされたカードのプラン名を取得
      let planName = cardYosos[i].getAttribute("data-plan");

      // すべてのカードからselectedクラスを削除
      for (let j = 0; j < cardYosos.length; j++) {
        cardYosos[j].classList.remove("selected");
      }

      // クリックされたカードにselectedクラスを追加
      cardYosos[i].classList.add("selected");

      // 選択中のプラン名を表示
      planYoso.innerText = planName;
    });
  }`}
/><Solution>
<CodePreview sourceId="演習-発展7" />

**解説**:
- ラジオボタンのような「1つだけ選択」の動作を、カードUIで実現しています
- クリック時にまずすべてのカードから `selected` を削除してから、クリックされたカードにのみ追加することで、排他的な選択を実現
- `transform: translateY(-4px);` で選択時に少し浮き上がる効果を追加しています
</Solution>
</Exercise>

---

