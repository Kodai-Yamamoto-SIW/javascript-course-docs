---
title: もっと見る
sidebar_position: 999
---

import Exercise, { Solution } from "@metyatech/exercise/client";
import { CodePreview } from "@metyatech/code-preview";

## もっと見るとは

「もっと見る」は、ブログ記事の概要表示やQ&Aサイトの回答、商品説明など、長い文章を最初は一部だけ表示し、ボタンで全文を表示する場面で使われます。

長いコンテンツの後半を隠しておき、ボタンをクリックすると残りが表示される UI パターンです。ページをすっきり見せつつ、ユーザーが興味を持てば続きを読めるようにできます。

このページでは、コンテンツを隠す方法・フェード効果・開閉の切り替えを順を追って学びます。

以下は、完成イメージです。「もっと見る」ボタンをクリックすると、隠れていたコンテンツが表示されます。

<CodePreview
  htmlVisible={false}
  cssVisible={false}
  jsVisible={false}
  previewVisible={true}
  initialHTML={`<div class="wrap">
  <p class="content">
    これは長いコンテンツのサンプルです。<br>
    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.<br>
    Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.<br>
    Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.<br>
    Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.<br>
    Curabitur pretium tincidunt lacus, nulla gravida orci a odio.<br>
    Nullam varius, turpis et commodo pharetra, est eros bibendum elit.<br>
    Aliquam erat volutpat, suspendisse potenti, sed dignissim lacinia nunc.<br>
    Praesent dapibus, neque id cursus faucibus, tortor neque egestas augue.<br>
    Etiam ultricies nisi vel augue, curabitur ullamcorper ultricies nisi.
  </p>
  <div class="fade"></div>
</div>
<button class="more">もっと見る</button>`}
  initialCSS={`.wrap {
  position: relative;
}

.content {
  max-height: 110px;
  overflow: hidden;
  transition: max-height 0.5s;
}

.wrap.open .content {
  max-height: 500px;
}

.fade {
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  height: 50px;
  background: linear-gradient(transparent, white);
  transition: opacity 0.3s;
}

.wrap.open .fade {
  opacity: 0;
}

.more {
  display: block;
  margin-top: 10px;
  padding: 8px 16px;
  border: 1px solid #ccc;
  background: white;
  cursor: pointer;
}`}
  initialJS={`let moreYoso = document.querySelector('.more');
let wrapperYoso = document.querySelector('.wrap');

let isOpen = false;

moreYoso.addEventListener('click', function() {
  wrapperYoso.classList.toggle('open');
  
  isOpen = !isOpen;
  
  if (isOpen) {
    moreYoso.innerText = '閉じる';
  } else {
    moreYoso.innerText = 'もっと見る';
  }
});`}
/>

---

## STEP 1: コンテンツを途中で切る

まずは、コンテンツの高さを制限して途中までしか見えないようにします。

### 高さを制限する

`height` や `max-height` を指定すると、要素の高さを制限できます。  
`overflow: hidden;` を組み合わせると、はみ出た部分が隠れます。

<CodePreview
  initialHTML={`<p class="content">
    これは長いコンテンツのサンプルです。<br>
    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.<br>
    Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.<br>
    Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.<br>
    Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.<br>
    Curabitur pretium tincidunt lacus, nulla gravida orci a odio.<br>
    Nullam varius, turpis et commodo pharetra, est eros bibendum elit.<br>
    Aliquam erat volutpat, suspendisse potenti, sed dignissim lacinia nunc.<br>
    Praesent dapibus, neque id cursus faucibus, tortor neque egestas augue.<br>
    Etiam ultricies nisi vel augue, curabitur ullamcorper ultricies nisi.
  </p>`}
  initialCSS={`.content {
    max-height: 110px; /* 高さを110pxに制限 */
    overflow: hidden; /* はみ出た部分を隠す */
  }`}
/>

<Exercise title="演習1（コンテンツの高さ制限）">

以下のプレビューと同じように、コンテンツの高さが130pxに制限されるようにしてください。

<CodePreview
  sourceId="演習1"
  htmlVisible={true}
  cssVisible={false}
  jsVisible={false}
  previewVisible={true}
  initialHTML={`<p class="content">
    Web開発の基礎を学びましょう。<br>
    HTMLは構造を作り、CSSは見た目を整え、JavaScriptは動きを加えます。<br>
    これらを組み合わせることで、魅力的なWebサイトが作れます。<br>
    最初は難しく感じるかもしれませんが、一歩ずつ進めば必ず身につきます。<br>
    実際に手を動かして、たくさんのコードを書いてみましょう。<br>
    まずは小さな部品（ボタンやメニュー）から作ると理解しやすいです。<br>
    レイアウトが崩れたら、開発者ツールで要素を確認してみましょう。<br>
    分からないときは、原因を一つずつ切り分けるのがコツです。<br>
    少しずつ積み上げると、できることが確実に増えていきます。
  </p>`}
  initialCSS={`.content {
    max-height: 130px;
    overflow: hidden;
  }`}
/>

<Solution>
<CodePreview sourceId="演習1" />
</Solution>
</Exercise>

---

## STEP 2: フェードで「まだ続きがある」感を出す

高さを制限しただけだと、コンテンツが途中でぶつ切りに見えます。  
下部にフェード（グラデーション）を重ねると、「続きがある」ことを視覚的に伝えられます。

### フェードの作り方

フェードは、透明から白へのグラデーションを持つ要素を、コンテンツの下部に重ねて作ります。

<CodePreview
  initialHTML={`<div class="wrap">
    <p class="content">
      これは長いコンテンツのサンプルです。<br>
      Lorem ipsum dolor sit amet, consectetur adipiscing elit.<br>
      Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.<br>
      Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris.<br>
      Duis aute irure dolor in reprehenderit in voluptate velit esse cillum.<br>
      Curabitur pretium tincidunt lacus, nulla gravida orci a odio.<br>
      Nullam varius, turpis et commodo pharetra, est eros bibendum elit.<br>
      Aliquam erat volutpat, suspendisse potenti, sed dignissim lacinia nunc.<br>
      Praesent dapibus, neque id cursus faucibus, tortor neque egestas augue.<br>
      Etiam ultricies nisi vel augue, curabitur ullamcorper ultricies nisi.
    </p>
    <div class="fade"></div>
  </div>`}
  initialCSS={`.wrap {
    position: relative; /* fadeの配置基準 */
  }

  .content {
    max-height: 110px;
    overflow: hidden;
  }

  .fade {
    position: absolute; /* 親要素を基準に配置 */
    bottom: 0; /* 下端に配置 */
    left: 0;
    right: 0; /* left:0 + right:0 で横幅いっぱい */
    height: 50px; /* フェードの高さ */
    background: linear-gradient(transparent, white); /* 上が透明、下が白 */
  }`}
/>

:::tip linear-gradient について
`linear-gradient(色1, 色2)` で、色1から色2へ徐々に変化するグラデーション画像を作れます。  
`transparent` は「透明」を意味する特別な色の値です。
:::

<Exercise title="演習2（フェードの追加）">

以下のプレビューと同じように、コンテンツの高さを適度に制限し、下部にフェードを重ねてください。

<CodePreview
  sourceId="演習2"
  htmlVisible={true}
  cssVisible={false}
  jsVisible={false}
  previewVisible={true}
  initialHTML={`<div class="wrap">
    <p class="content">
      Web開発の基礎を学びましょう。<br>
      HTMLは構造を作り、CSSは見た目を整え、JavaScriptは動きを加えます。<br>
      これらを組み合わせることで、魅力的なWebサイトが作れます。<br>
      最初は難しく感じるかもしれませんが、一歩ずつ進めば必ず身につきます。<br>
      実際に手を動かして、たくさんのコードを書いてみましょう。<br>
      まずは見た目だけ、次に動きを追加する順番がおすすめです。<br>
      CSSの指定が効かないときは、セレクタと優先順位を確認します。<br>
      JavaScriptは「要素を取る → イベントを付ける → クラスを切り替える」が基本です。<br>
      何度も試して、少しずつ慣れていきましょう。
    </p>
    <div class="fade"></div>
  </div>`}
  initialCSS={`.wrap {
    position: relative;
  }

  .content {
    max-height: 110px;
    overflow: hidden;
  }

  .fade {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 60px;
    background: linear-gradient(transparent, white);
  }`}
/>

<Solution>
<CodePreview sourceId="演習2" />
</Solution>
</Exercise>

---

## STEP 3: 「もっと見る」ボタンを追加する

ボタンを追加して、クリックしたらコンテンツが開くようにします。

### クラスの付け外しで開閉を切り替える

開いている状態を `open` クラスで表現します。

<CodePreview
  initialHTML={`<div class="wrap">
    <p class="content">
      これは長いコンテンツのサンプルです。<br>
      Lorem ipsum dolor sit amet, consectetur adipiscing elit.<br>
      Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.<br>
      Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris.<br>
      Duis aute irure dolor in reprehenderit in voluptate velit esse cillum.<br>
      Curabitur pretium tincidunt lacus, nulla gravida orci a odio.<br>
      Nullam varius, turpis et commodo pharetra, est eros bibendum elit.<br>
      Aliquam erat volutpat, suspendisse potenti, sed dignissim lacinia nunc.<br>
      Praesent dapibus, neque id cursus faucibus, tortor neque egestas augue.<br>
      Etiam ultricies nisi vel augue, curabitur ullamcorper ultricies nisi.
    </p>
    <div class="fade"></div>
  </div>
  <button class="more">もっと見る</button>`}
  initialCSS={`.wrap {
    position: relative;
  }

  .content {
    max-height: 110px;
    overflow: hidden;
  }

  .wrap.open .content {
    max-height: none; /* 高さ制限を解除 */
  }

  .fade {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 50px;
    background: linear-gradient(transparent, white);
  }

  .wrap.open .fade {
    display: none; /* 開いたらフェードを非表示 */
  }`}
  initialJS={`// ボタンの要素を取得
  let moreYoso = document.querySelector('.more');
  // ラッパーの要素を取得
  let wrapperYoso = document.querySelector('.wrap');

  // ボタンがクリックされたときの処理
  moreYoso.addEventListener('click', function() {
    // ラッパーに open クラスを付け外し（開閉状態を表す）
    wrapperYoso.classList.toggle('open');
  });`}
/>

<Exercise title="演習3（開閉機能の作成）">

以下のプレビューと同じように、ボタンをクリックするとコンテンツが開閉するようにしてください。  
開いたときはフェードが消えるようにしてください。

<CodePreview
  sourceId="演習3"
  htmlVisible={true}
  cssVisible={false}
  jsVisible={false}
  previewVisible={true}
  initialHTML={`<div class="wrap">
    <p class="content">
      Web開発の基礎を学びましょう。<br>
      HTMLは構造を作り、CSSは見た目を整え、JavaScriptは動きを加えます。<br>
      これらを組み合わせることで、魅力的なWebサイトが作れます。<br>
      最初は難しく感じるかもしれませんが、一歩ずつ進めば必ず身につきます。<br>
      実際に手を動かして、たくさんのコードを書いてみましょう。<br>
      まずはHTMLで部品を置き、次にCSSで整え、最後にJSで動かします。<br>
      クリック時の挙動は、イベントリスナーで追加できます。<br>
      開閉状態はクラスで表すと、CSSだけで見た目を変えられて便利です。<br>
      一度作れたら、別のUIにも応用できます。
    </p>
    <div class="fade"></div>
  </div>
  <button class="more">もっと見る</button>`}
  initialCSS={`.wrap {
    position: relative;
  }

  .content {
    max-height: 120px;
    overflow: hidden;
  }

  .wrap.open .content {
    max-height: none;
  }

  .fade {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 60px;
    background: linear-gradient(transparent, white);
  }

  .wrap.open .fade {
    display: none;
  }`}
  initialJS={`let moreYoso = document.querySelector('.more');
  let wrapperYoso = document.querySelector('.wrap');

  moreYoso.addEventListener('click', function() {
    wrapperYoso.classList.toggle('open');
  });`}
/>

<Solution>
<CodePreview sourceId="演習3" />
</Solution>
</Exercise>

---

## STEP 4: アニメーションを追加する

`transition` を使って、開閉を滑らかにします。

### max-height をアニメーションさせる

`max-height` の値を変化させることでアニメーションできます。  
ただし、`max-height: none` にはアニメーションできないため、開いた状態では十分大きな値（例: `1100px`）を指定します。

<CodePreview
  initialHTML={`<div class="wrap">
    <p class="content">
      これは長いコンテンツのサンプルです。<br>
      Lorem ipsum dolor sit amet, consectetur adipiscing elit.<br>
      Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.<br>
      Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris.<br>
      Duis aute irure dolor in reprehenderit in voluptate velit esse cillum.<br>
      Curabitur pretium tincidunt lacus, nulla gravida orci a odio.<br>
      Nullam varius, turpis et commodo pharetra, est eros bibendum elit.<br>
      Aliquam erat volutpat, suspendisse potenti, sed dignissim lacinia nunc.<br>
      Praesent dapibus, neque id cursus faucibus, tortor neque egestas augue.<br>
      Etiam ultricies nisi vel augue, curabitur ullamcorper ultricies nisi.
    </p>
    <div class="fade"></div>
  </div>
  <button class="more">もっと見る</button>`}
  initialCSS={`.wrap {
    position: relative;
  }

  .content {
    max-height: 110px;
    overflow: hidden;
    transition: max-height 0.5s; /* アニメーション追加 */
  }

  .wrap.open .content {
    max-height: 500px; /* 十分大きな値を指定 */
  }

  .fade {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 50px;
    background: linear-gradient(transparent, white);
    transition: opacity 0.3s; /* フェードアウト用 */
  }

  .wrap.open .fade {
    opacity: 0; /* 透明にする */
  }`}
  initialJS={`let moreYoso = document.querySelector('.more');
  let wrapperYoso = document.querySelector('.wrap');

  moreYoso.addEventListener('click', function() {
    wrapperYoso.classList.toggle('open');
  });`}
/>

:::tip max-height に大きな値を指定する理由
`transition` は `none` などのキーワードにはアニメーションできません。  
そのため、「十分に大きな数値」を指定して、実質的に高さ制限がないように見せます。
:::

:::note 最新情報: interpolate-size について
2026年1月現在、キーワードで指定したサイズ（例: `auto` や `none`）でもアニメーションできるようにするために、 [`interpolate-size`](https://developer.mozilla.org/ja/docs/Web/CSS/Reference/Properties/interpolate-size) というプロパティが実験的に一部の最新ブラウザーに実装されています。

ただし、現時点では実験段階であり、対応しているブラウザが限られるため、この教材では「十分に大きな値を指定する」方法を採用しています。
:::

<Exercise title="演習4（アニメーション化）">

以下のプレビューと同じように、コンテンツの開閉が滑らかにアニメーションするようにしてください。  
フェードも滑らかに消えるようにしてください。

<CodePreview
  sourceId="演習4"
  htmlVisible={true}
  cssVisible={false}
  jsVisible={false}
  previewVisible={true}
  initialHTML={`<div class="wrap">
    <p class="content">
      Web開発の基礎を学びましょう。<br>
      HTMLは構造を作り、CSSは見た目を整え、JavaScriptは動きを加えます。<br>
      これらを組み合わせることで、魅力的なWebサイトが作れます。<br>
      最初は難しく感じるかもしれませんが、一歩ずつ進めば必ず身につきます。<br>
      実際に手を動かして、たくさんのコードを書いてみましょう。<br>
      アニメーションがあると、状態変化が分かりやすくなります。<br>
      ただし動きをつけすぎると見づらくなるので、ほどよく調整します。<br>
      transition は「どのプロパティを何秒で変えるか」を指定します。<br>
      いろいろな値を試して、自分の好みを見つけましょう。
    </p>
    <div class="fade"></div>
  </div>
  <button class="more">もっと見る</button>`}
  initialCSS={`.wrap {
    position: relative;
  }

  .content {
    max-height: 120px;
    overflow: hidden;
    transition: max-height 0.5s;
  }

  .wrap.open .content {
    max-height: 500px;
  }

  .fade {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 60px;
    background: linear-gradient(transparent, white);
    transition: opacity 0.3s;
  }

  .wrap.open .fade {
    opacity: 0;
  }`}
  initialJS={`let moreYoso = document.querySelector('.more');
  let wrapperYoso = document.querySelector('.wrap');

  moreYoso.addEventListener('click', function() {
    wrapperYoso.classList.toggle('open');
  });`}
/>

<Solution>
<CodePreview sourceId="演習4" />
</Solution>
</Exercise>

---

## STEP 5: ボタンのテキストを切り替える

開いているときと閉じているときでボタンの文言を変えると、より使いやすくなります。

### innerText でテキストを変更する

<CodePreview
  initialHTML={`<div class="wrap">
    <p class="content">
      これは長いコンテンツのサンプルです。<br>
      Lorem ipsum dolor sit amet, consectetur adipiscing elit.<br>
      Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.<br>
      Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris.<br>
      Duis aute irure dolor in reprehenderit in voluptate velit esse cillum.<br>
      Curabitur pretium tincidunt lacus, nulla gravida orci a odio.<br>
      Nullam varius, turpis et commodo pharetra, est eros bibendum elit.<br>
      Aliquam erat volutpat, suspendisse potenti, sed dignissim lacinia nunc.<br>
      Praesent dapibus, neque id cursus faucibus, tortor neque egestas augue.<br>
      Etiam ultricies nisi vel augue, curabitur ullamcorper ultricies nisi.
    </p>
    <div class="fade"></div>
  </div>
  <button class="more">もっと見る</button>`}
  initialCSS={`.wrap {
    position: relative;
  }

  .content {
    max-height: 110px;
    overflow: hidden;
    transition: max-height 0.5s;
  }

  .wrap.open .content {
    max-height: 500px;
  }

  .fade {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 50px;
    background: linear-gradient(transparent, white);
    transition: opacity 0.3s;
  }

  .wrap.open .fade {
    opacity: 0;
  }`}
  initialJS={`let moreYoso = document.querySelector('.more');
  let wrapperYoso = document.querySelector('.wrap');

  // 開いているかどうかを記録する変数
  let isOpen = false;

  moreYoso.addEventListener('click', function() {
    wrapperYoso.classList.toggle('open');
    
    // 状態を反転
    isOpen = !isOpen;
    
    // 状態に応じてボタンのテキストを変更
    if (isOpen) {
      moreYoso.innerText = '閉じる';
    } else {
      moreYoso.innerText = 'もっと見る';
    }
  });`}
/>

<Exercise title="演習5（ボタンテキストの切り替え）">

以下のプレビューと同じように、開いているときは「閉じる」、閉じているときは「もっと見る」とボタンに表示されるようにしてください。

<CodePreview
  sourceId="演習5"
  htmlVisible={true}
  cssVisible={false}
  jsVisible={false}
  previewVisible={true}
  initialHTML={`<div class="wrap">
    <p class="content">
      Web開発の基礎を学びましょう。<br>
      HTMLは構造を作り、CSSは見た目を整え、JavaScriptは動きを加えます。<br>
      これらを組み合わせることで、魅力的なWebサイトが作れます。<br>
      最初は難しく感じるかもしれませんが、一歩ずつ進めば必ず身につきます。<br>
      実際に手を動かして、たくさんのコードを書いてみましょう。<br>
      ボタンの文言が変わると、今の状態がすぐ分かります。<br>
      たとえば「もっと見る / 閉じる」のようにペアで用意すると親切です。<br>
      状態を変数で持つか、クラスの有無で判定する方法があります。<br>
      どちらでも作れるので、読みやすい方を選びましょう。
    </p>
    <div class="fade"></div>
  </div>
  <button class="more">もっと見る</button>`}
  initialCSS={`.wrap {
    position: relative;
  }

  .content {
    max-height: 120px;
    overflow: hidden;
    transition: max-height 0.5s;
  }

  .wrap.open .content {
    max-height: 500px;
  }

  .fade {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 60px;
    background: linear-gradient(transparent, white);
    transition: opacity 0.3s;
  }

  .wrap.open .fade {
    opacity: 0;
  }`}
  initialJS={`let moreYoso = document.querySelector('.more');
  let wrapperYoso = document.querySelector('.wrap');

  let isOpen = false;

  moreYoso.addEventListener('click', function() {
    wrapperYoso.classList.toggle('open');
    
    isOpen = !isOpen;
    
    if (isOpen) {
      moreYoso.innerText = '閉じる';
    } else {
      moreYoso.innerText = 'もっと見る';
    }
  });`}
/>

<Solution>
<CodePreview sourceId="演習5" />
</Solution>
</Exercise>

---

## 発展課題

<Exercise title="演習-発展1（デザイン調整）">

以下のプレビューと同じように、見た目を整えてください。

- コンテンツにパディングと枠線を追加
- ボタンのデザインを改善（角丸、ホバー効果など）

<CodePreview
  sourceId="演習-発展1"
  htmlVisible={true}
  cssVisible={false}
  jsVisible={false}
  previewVisible={true}
  initialHTML={`<div class="wrap">
    <p class="content">
      Web開発の基礎を学びましょう。<br>
      HTMLは構造を作り、CSSは見た目を整え、JavaScriptは動きを加えます。<br>
      これらを組み合わせることで、魅力的なWebサイトが作れます。<br>
      最初は難しく感じるかもしれませんが、一歩ずつ進めば必ず身につきます。<br>
      実際に手を動かして、たくさんのコードを書いてみましょう。<br>
      余白や枠線があると、読みやすさが一気に上がります。<br>
      ボタンはホバー時に色が変わると、押せることが伝わります。<br>
      角丸や影を付けると、カードっぽい見た目になります。<br>
      デザインは好みもあるので、いろいろ試してみましょう。
    </p>
    <div class="fade"></div>
  </div>
  <button class="more">もっと見る</button>`}
  initialCSS={`.wrap {
    position: relative;
    border: 1px solid #ddd;
    border-radius: 8px;
    overflow: hidden;
  }

  .content {
    max-height: 120px;
    overflow: hidden;
    transition: max-height 0.5s;
    padding: 16px;
  }

  .wrap.open .content {
    max-height: 500px;
  }

  .fade {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 60px;
    background: linear-gradient(transparent, white);
    transition: opacity 0.3s;
  }

  .wrap.open .fade {
    opacity: 0;
  }

  .more {
    display: block;
    width: 100%;
    margin-top: 0;
    padding: 12px 16px;
    border: none;
    border-top: 1px solid #ddd;
    background: #f5f5f5;
    cursor: pointer;
    font-size: 14px;
    transition: background 0.2s;
  }

  .more:hover {
    background: #e8e8e8;
  }`}
  initialJS={`let moreYoso = document.querySelector('.more');
  let wrapperYoso = document.querySelector('.wrap');

  let isOpen = false;

  moreYoso.addEventListener('click', function() {
    wrapperYoso.classList.toggle('open');
    
    isOpen = !isOpen;
    
    if (isOpen) {
      moreYoso.innerText = '閉じる';
    } else {
      moreYoso.innerText = 'もっと見る';
    }
  });`}
/>

<Solution>
<CodePreview sourceId="演習-発展1" />
</Solution>
</Exercise>

<Exercise title="演習-発展2（矢印アイコンの追加）">

以下のプレビューと同じように、ボタンに矢印アイコンを追加してください。  
開いているときは上向き、閉じているときは下向きにしてください。

:::tip
矢印は CSS の `border` を使って三角形を作るか、Unicode文字（例: ▼ ▲）を使う方法があります。
:::

<CodePreview
  sourceId="演習-発展2"
  htmlVisible={true}
  cssVisible={false}
  jsVisible={false}
  previewVisible={true}
  initialHTML={`<div class="wrap">
    <p class="content">
      Web開発の基礎を学びましょう。<br>
      HTMLは構造を作り、CSSは見た目を整え、JavaScriptは動きを加えます。<br>
      これらを組み合わせることで、魅力的なWebサイトが作れます。<br>
      最初は難しく感じるかもしれませんが、一歩ずつ進めば必ず身につきます。<br>
      実際に手を動かして、たくさんのコードを書いてみましょう。<br>
      矢印があると、開閉できることが直感的に分かります。<br>
      開いたら矢印が回転すると、状態の変化がより伝わります。<br>
      テキストとアイコンは並べ方を整えると見た目が良くなります。<br>
      まずは動作を作ってから、見た目を整えていきましょう。
    </p>
    <div class="fade"></div>
  </div>
  <button class="more">
    <span class="btn-text">もっと見る</span>
    <span class="arrow">▼</span>
  </button>`}
  initialCSS={`.wrap {
    position: relative;
    border: 1px solid #ddd;
    border-radius: 8px;
    overflow: hidden;
  }

  .content {
    max-height: 120px;
    overflow: hidden;
    transition: max-height 0.5s;
    padding: 16px;
  }

  .wrap.open .content {
    max-height: 500px;
  }

  .fade {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 60px;
    background: linear-gradient(transparent, white);
    transition: opacity 0.3s;
  }

  .wrap.open .fade {
    opacity: 0;
  }

  .more {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 8px;
    width: 100%;
    padding: 12px 16px;
    border: none;
    border-top: 1px solid #ddd;
    background: #f5f5f5;
    cursor: pointer;
    font-size: 14px;
    transition: background 0.2s;
  }

  .more:hover {
    background: #e8e8e8;
  }

  .arrow {
    font-size: 10px;
    transition: transform 0.3s;
  }

  .more.open .arrow {
    transform: rotate(180deg);
  }`}
  initialJS={`let moreYoso = document.querySelector('.more');
  let wrapperYoso = document.querySelector('.wrap');
  let btnTextYoso = document.querySelector('.btn-text');

  let isOpen = false;

  moreYoso.addEventListener('click', function() {
    wrapperYoso.classList.toggle('open');
    moreYoso.classList.toggle('open');
    
    isOpen = !isOpen;
    
    if (isOpen) {
      btnTextYoso.innerText = '閉じる';
    } else {
      btnTextYoso.innerText = 'もっと見る';
    }
  });`}
/>

<Solution>
<CodePreview sourceId="演習-発展2" />
</Solution>
</Exercise>

<Exercise title="演習-発展3（複数の「もっと見る」を設置）">

1つのページに複数の「もっと見る」を設置する場合、それぞれが独立して動作する必要があります。  
以下のプレビューと同じように、2つの「もっと見る」が独立して動作するようにしてください。

:::tip
`querySelectorAll` を使うと、複数の要素をまとめて取得できます。  
取得した要素に対してループ処理を行うことで、それぞれに独立した処理を設定できます。
:::

<CodePreview
  sourceId="演習-発展3"
  htmlVisible={true}
  cssVisible={false}
  jsVisible={false}
  previewVisible={true}
  initialHTML={`<div class="show-more-container">
    <div class="wrap">
      <p class="content">
        <strong>セクション1</strong><br>
        HTMLは構造を作り、CSSは見た目を整え、JavaScriptは動きを加えます。<br>
        これらを組み合わせることで、魅力的なWebサイトが作れます。<br>
        最初は難しく感じるかもしれませんが、一歩ずつ進めば必ず身につきます。<br>
        まずは一つずつ、動く部品を増やしていきましょう。<br>
        小さな成功体験を積むと、学習が続けやすくなります。<br>
        分からないときは、表示と動作を分けて確認します。
      </p>
      <div class="fade"></div>
    </div>
    <button class="more">もっと見る</button>
  </div>

  <div class="show-more-container">
    <div class="wrap">
      <p class="content">
        <strong>セクション2</strong><br>
        プログラミングは論理的思考を養います。<br>
        問題を小さく分解し、一つずつ解決していく力が身につきます。<br>
        失敗を恐れず、たくさん試行錯誤することが上達の秘訣です。<br>
        うまくいかない原因を仮説→検証する流れが大切です。<br>
        コードを少しずつ変えて、結果の違いを観察してみましょう。<br>
        継続して練習すると、理解が深まっていきます。
      </p>
      <div class="fade"></div>
    </div>
    <button class="more">もっと見る</button>
  </div>`}
  initialCSS={`.show-more-container {
    margin-bottom: 20px;
  }

  .wrap {
    position: relative;
    border: 1px solid #ddd;
    border-radius: 8px 8px 0 0;
    overflow: hidden;
  }

  .content {
    max-height: 80px;
    overflow: hidden;
    transition: max-height 0.5s;
    padding: 16px;
  }

  .wrap.open .content {
    max-height: 300px;
  }

  .fade {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 40px;
    background: linear-gradient(transparent, white);
    transition: opacity 0.3s;
  }

  .wrap.open .fade {
    opacity: 0;
  }

  .more {
    display: block;
    width: 100%;
    padding: 10px;
    border: 1px solid #ddd;
    border-top: none;
    border-radius: 0 0 8px 8px;
    background: #f5f5f5;
    cursor: pointer;
    font-size: 14px;
    transition: background 0.2s;
  }

  .more:hover {
    background: #e8e8e8;
  }`}
  initialJS={`// すべての show-more-container を取得
  let containers = document.querySelectorAll('.show-more-container');

  // それぞれのコンテナに対して処理を設定
  containers.forEach(function(container) {
    let moreYoso = container.querySelector('.more');
    let wrapperYoso = container.querySelector('.wrap');
    
    let isOpen = false;
    
    moreYoso.addEventListener('click', function() {
      wrapperYoso.classList.toggle('open');
      
      isOpen = !isOpen;
      
      if (isOpen) {
        moreYoso.innerText = '閉じる';
      } else {
        moreYoso.innerText = 'もっと見る';
      }
    });
  });`}
/>

<Solution>
<CodePreview sourceId="演習-発展3" />
</Solution>
</Exercise>

<Exercise title="演習-発展4（行数制限で切る）">

高さ(px)ではなく、行数で表示を制限したい場合があります。  
CSS の `-webkit-line-clamp` を使うと、指定した行数で切って「...」を表示できます。

以下のプレビューと同じように、3行で切り、開くと全文が表示されるようにしてください。

:::tip
`-webkit-line-clamp` を使うには、以下のプロパティを組み合わせます：
- `display: -webkit-box;`
- `-webkit-box-orient: vertical;`
- `-webkit-line-clamp: 行数;`
- `overflow: hidden;`
:::

<CodePreview
  sourceId="演習-発展4"
  htmlVisible={true}
  cssVisible={false}
  jsVisible={false}
  previewVisible={true}
  initialHTML={`<div class="wrap">
    <p class="content">
      Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Curabitur pretium tincidunt lacus, nulla gravida orci a odio. Nullam varius, turpis et commodo pharetra, est eros bibendum elit. Aliquam erat volutpat. Praesent dapibus, neque id cursus faucibus, tortor neque egestas augue. Etiam ultricies nisi vel augue.
    </p>
  </div>
  <button class="more">もっと見る</button>`}
  initialCSS={`.wrap {
    border: 1px solid #ddd;
    border-radius: 8px;
    padding: 16px;
  }

  .content {
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-line-clamp: 3;
    overflow: hidden;
  }

  .wrap.open .content {
    display: block;
    -webkit-line-clamp: unset;
  }

  .more {
    display: block;
    margin-top: 10px;
    padding: 8px 16px;
    border: 1px solid #ccc;
    border-radius: 4px;
    background: white;
    cursor: pointer;
  }`}
  initialJS={`let moreYoso = document.querySelector('.more');
  let wrapperYoso = document.querySelector('.wrap');

  let isOpen = false;

  moreYoso.addEventListener('click', function() {
    wrapperYoso.classList.toggle('open');
    
    isOpen = !isOpen;
    
    if (isOpen) {
      moreYoso.innerText = '閉じる';
    } else {
      moreYoso.innerText = 'もっと見る';
    }
  });`}
/>

<Solution>
<CodePreview sourceId="演習-発展4" />
</Solution>
</Exercise>

<Exercise title="演習-発展5（最初から開いている状態も対応）">

コンテンツが短い場合、最初から全文が見えているのにボタンが表示されるのは不自然です。  
コンテンツの実際の高さが制限値を超えている場合のみボタンを表示するようにしてください。

:::tip
- `scrollHeight` を使うと、要素の実際の高さ（スクロールしないと見えない部分も含む）を取得できます。
- `clientHeight` を使うと、要素の表示されている高さを取得できます。
- これらを比較することで、コンテンツが切れているかどうかを判定できます。
:::

<CodePreview
  sourceId="演習-発展5"
  htmlVisible={true}
  cssVisible={false}
  jsVisible={false}
  previewVisible={true}
  initialHTML={`<div class="show-more-container">
    <div class="wrap">
      <p class="content">
        このコンテンツは長いです。<br>
        Lorem ipsum dolor sit amet, consectetur adipiscing elit.<br>
        Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.<br>
        Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris.<br>
        Duis aute irure dolor in reprehenderit in voluptate velit esse cillum.<br>
        Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia.
      </p>
      <div class="fade"></div>
    </div>
    <button class="more">もっと見る</button>
  </div>

  <div class="show-more-container">
    <div class="wrap">
      <p class="content">このコンテンツは短いです。短文なので最初から全文が見えます。</p>
      <div class="fade"></div>
    </div>
    <button class="more">もっと見る</button>
  </div>`}
  initialCSS={`.show-more-container {
    margin-bottom: 20px;
  }

  .wrap {
    position: relative;
    border: 1px solid #ddd;
    border-radius: 8px;
    overflow: hidden;
  }

  .content {
    max-height: 110px;
    overflow: hidden;
    transition: max-height 0.5s;
    padding: 16px;
  }

  .wrap.open .content {
    max-height: 500px;
  }

  .fade {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 40px;
    background: linear-gradient(transparent, white);
    transition: opacity 0.3s;
  }

  .wrap.open .fade {
    opacity: 0;
  }

  .more {
    display: none;
    width: 100%;
    padding: 10px;
    border: 1px solid #ddd;
    border-top: none;
    border-radius: 0 0 8px 8px;
    background: #f5f5f5;
    cursor: pointer;
  }

  .more.visible {
    display: block;
  }

  .wrap.no-overflow {
    border-radius: 8px;
  }

  .wrap.no-overflow .fade {
    display: none;
  }`}
  initialJS={`let containers = document.querySelectorAll('.show-more-container');

  containers.forEach(function(container) {
    let moreYoso = container.querySelector('.more');
    let contentYoso = container.querySelector('.content');
    let wrapperYoso = container.querySelector('.wrap');
    
    // コンテンツが切れているかチェック
    if (contentYoso.scrollHeight > contentYoso.clientHeight) {
      // 切れている場合はボタンを表示
      moreYoso.classList.add('visible');
    } else {
      // 切れていない場合はフェードも非表示に
      wrapperYoso.classList.add('no-overflow');
    }
    
    let isOpen = false;
    
    moreYoso.addEventListener('click', function() {
      wrapperYoso.classList.toggle('open');
      
      isOpen = !isOpen;
      
      if (isOpen) {
        moreYoso.innerText = '閉じる';
      } else {
        moreYoso.innerText = 'もっと見る';
      }
    });
  });`}
/>

<Solution>
<CodePreview sourceId="演習-発展5" />
</Solution>
</Exercise>
